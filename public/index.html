<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boop Online</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="game-header">
            <h1 class="game-title">🐱 Boop Online</h1>
        </header>

        <main class="game-main">
            <!-- Game Status Card -->
            <div class="info-card game-status-card">
                <div class="status-row">
                    <div id="player-id-display" class="player-display">Verbinde...</div>
                    <div id="timer-display" class="timer-display-inline"></div>
                </div>
                <div id="current-player-display" class="turn-display">Warten auf Spieler...</div>
                <div id="supply-display" class="supply-display-inline">Vorrat wird geladen...</div>
                <div class="timer-controls">
                    <button id="new-game-btn" class="new-game-btn" onclick="requestNewGame()" style="display: none;">
                        🔄 Neues Spiel
                    </button>
                    <button id="timer-toggle" class="timer-toggle-btn" onclick="toggleTimer()">
                        ⏱️ Timer: AUS
                    </button>
                    <button id="rules-btn-small" class="rules-btn-small" onclick="scrollToRules()">
                        📖 Regeln
                    </button>

                    <small id="timer-help" class="timer-help">Timer nur vor dem ersten Zug änderbar</small>
                    <div id="timer-status" class="timer-status" style="display: none;">
                        <span id="timer-status-text">Timer ist deaktiviert</span>
                        <small>(Einstellung durch Spieler 1)</small>
                    </div>
                </div>
            </div>

            <!-- Piece Selection -->
            <div class="compact-piece-selection">
                <span class="selection-label">Figur:</span>
                <div id="piece-selection" class="piece-selection-compact">
                    <label class="piece-option-compact">
                        <input type="radio" name="pieceType" value="kitten" checked>
                        <span class="piece-label-compact">🐱</span>
                    </label>
                    <label class="piece-option-compact">
                        <input type="radio" name="pieceType" value="cat">
                        <span class="piece-label-compact">🐈</span>
                    </label>
                </div>
            </div>

            <!-- Status Messages -->
            <div id="status-message" class="status-message" data-empty="true"></div>

            <!-- Emoji Popup Container -->
            <div id="emoji-popup-container" class="emoji-popup-container"></div>

            <!-- New Game Confirmation Dialog -->
            <div id="new-game-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content">
                    <h3>🔄 Neues Spiel starten?</h3>
                    <p>Bist du sicher, dass du ein neues Spiel starten möchtest? Das aktuelle Spiel wird beendet und zurückgesetzt.</p>
                    <div class="modal-buttons">
                        <button class="btn-cancel" onclick="cancelNewGame()">Abbrechen</button>
                        <button class="btn-confirm" onclick="confirmNewGame()">Neues Spiel starten</button>
                    </div>
                </div>
            </div>

            <!-- Special Promotion Area -->
            <div id="specialPromotionOfferArea" class="special-promotion-area" style="display: none;">
                <div class="promotion-card">
                    <h3>🌟 Besondere Beförderung!</h3>
                    <p id="specialPromotionMessage" class="promotion-message">
                        Klicke auf eines deiner Kätzchen, um es zu einer Katze zu befördern!
                    </p>
                </div>
            </div>

            <!-- Game Board -->
            <div class="board-container">
                <div id="game-board" class="game-board">
                    <!-- Cells will be generated by JavaScript -->
                </div>
            </div>

            <!-- Emoji Communication -->
            <div class="emoji-communication">
                <div class="emoji-grid">
                    <button class="emoji-btn" onclick="sendEmoji('👍')" title="Daumen hoch">👍</button>
                    <button class="emoji-btn" onclick="sendEmoji('👎')" title="Daumen runter">👎</button>
                    <button class="emoji-btn" onclick="sendEmoji('😊')" title="Lächeln">😊</button>
                    <button class="emoji-btn" onclick="sendEmoji('😮')" title="Überrascht">😮</button>
                    <button class="emoji-btn" onclick="sendEmoji('🤔')" title="Nachdenken">🤔</button>
                    <button class="emoji-btn" onclick="sendEmoji('😤')" title="Genervt">😤</button>
                    <button class="emoji-btn" onclick="sendEmoji('🎉')" title="Feiern">🎉</button>
                    <button class="emoji-btn" onclick="sendEmoji('😅')" title="Nervös lachen">😅</button>
                    <button class="emoji-btn" onclick="sendEmoji('🤦')" title="Facepalm">🤦</button>
                    <button class="emoji-btn" onclick="sendEmoji('⚡')" title="Schnell">⚡</button>
                </div>
            </div>

        </main>

        <!-- Invite Link Card - Moved to bottom -->
        <div class="info-card invite-card invite-card-bottom">
            <h3 class="invite-title">🎮 Zweiten Spieler einladen</h3>
            <p class="invite-description">Teile diesen Link mit einem Freund, damit er dem Spiel beitreten kann:</p>
            <div class="invite-link-container">
                <a id="invite-link" href="#" class="invite-link">Lädt...</a>
                <button class="copy-button" onclick="copyInviteLink()" title="Link kopieren">
                    <img src="/images/copy.png" alt="Kopieren" class="copy-icon">
                </button>
            </div>
        </div>

        <section id="rules-overview" class="rules-card">
            <h2>Spielregeln im Überblick</h2>

            <h4>Spielziel</h4>
            <p>Gewonnen hat, wer zuerst eines der folgenden Ziele erreicht:</p>
            <ul>
                <li>Drei eigene Katzen in einer horizontalen, vertikalen oder diagonalen Reihe zu platzieren.</li>
                <li>Alle acht eigenen Katzen auf dem Spielbrett platziert zu haben.</li>
            </ul>

            <h4>Spielstart &amp; Figuren setzen</h4>
            <p>Jeder Spieler beginnt mit 8 Kätzchen im Vorrat. Abwechselnd platzieren die Spieler eine ihrer Figuren (Kätzchen oder Katze aus dem Vorrat) auf ein leeres Feld des 6x6 Spielbretts.</p>

            <h4>Booping (Anstoßen von Figuren)</h4>
            <ul>
                <li>Wird eine Figur platziert, stößt sie alle direkt angrenzenden Figuren (eigene und gegnerische) ein Feld von sich weg.</li>
                <li><strong>Kätzchen</strong> können nur andere <strong>Kätzchen</strong> boopen.</li>
                <li><strong>Katzen</strong> können sowohl <strong>Kätzchen</strong> als auch <strong>Katzen</strong> boopen.</li>
                <li>Eine Figur wird nicht gebooped, wenn das Zielfeld (das Feld, auf das sie geschoben würde) bereits von einer anderen Figur besetzt ist. In diesem Fall bleibt die zu boopende Figur stehen.</li>
                <li>Figuren, die über den Rand des Spielbretts gebooped werden, kommen zurück in den Vorrat ihres Besitzers.</li>
            </ul>

            <h4>Kätzchen zu Katzen aufwerten (Promotion)</h4>
            <p>Bilden drei <strong>Kätzchen</strong> eines Spielers eine durchgehende Reihe (horizontal, vertikal oder diagonal), werden alle Kätzchen innerhalb dieser Dreiergruppe zu Katzen aufgewertet und kommen in den Vorrat des Spielers. Von dort können sie platziert werden.</p>

            <h4>Sonderaktion: Alle Figuren auf dem Brett</h4>
            <p>Hat ein Spieler alle seine 8 Figuren auf dem Brett platziert (d.h. keine Figuren mehr im Vorrat zum Setzen), darf er als Sonderaktion ein eigenes Kätzchen vom Spielfeld nehmen. Dafür erhält er eine Katze in seinen Vorrat, die er in einem seiner nächsten Züge platzieren kann.</p>
        </section>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
